{"ast":null,"code":"var _jsxFileName = \"/home/trina/thinkful/petful-client/src/Components/AdoptionPage/AdoptionPage.js\";\nimport React, { Component } from 'react';\nimport './AdoptionPage.css';\nimport config from '../../config';\nexport default class AdoptionPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dog: {},\n      cat: {},\n      otherCats: [],\n      otherDogs: [],\n      people: [],\n      currentUser: null,\n      petChoice: true\n    };\n\n    this.updatePeopleList = () => {\n      fetch(`${config.API_ENDPOINT}/people`).then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          people: data\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${config.API_ENDPOINT}/pets`).then(res => res.json()).then(data => {\n      console.log('data:', data);\n      this.setState({\n        dog: data.nextDog,\n        cat: data.nextCat,\n        otherCats: data.allCats.slice(2, 4),\n        otherDogs: data.allDogs.slice(2, 4)\n      });\n    });\n    fetch(`${config.API_ENDPOINT}/people`).then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        people: data\n      });\n    });\n  }\n\n  onJoinQueue(e) {\n    e.preventDefault();\n    const name = {\n      Name: e.target.name.value\n    };\n    const add = this.state.people;\n    add.push(e.target.name.value);\n    fetch(`${config.API_ENDPOINT}/people`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(name)\n    });\n    this.setState({\n      people: add,\n      currentUser: e.target.name.value\n    });\n    let thisPage = this;\n    let interval = setInterval(function () {\n      let petChoice;\n\n      if (thisPage.state.petChoice === true) {\n        petChoice = {\n          type: 'cat'\n        };\n      } else {\n        petChoice = {\n          type: 'dog'\n        };\n      }\n\n      thisPage.fetchData(petChoice);\n      thisPage.setState({\n        petChoice: !thisPage.state.petChoice\n      });\n\n      if (thisPage.state.people[1] === thisPage.state.currentUser) {\n        clearInterval(interval);\n      }\n    }, 5000);\n    e.target.name.value = '';\n  }\n\n  fetchData(petChoice) {\n    fetch(`${config.API_ENDPOINT}/pets`, {\n      method: 'DELETE',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(petChoice)\n    }).then(() => {\n      return fetch(`${config.API_ENDPOINT}/pets`);\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        dog: data.nextDog,\n        cat: data.nextCat\n      });\n      return fetch(`${config.API_ENDPOINT}/people`);\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        people: data\n      });\n    });\n  }\n\n  nextInLine() {\n    const newNames = [{\n      Name: 'Sasha Morales'\n    }, {\n      Name: 'Trinity Hart'\n    }, {\n      Name: 'Ariel Forrest'\n    }, {\n      Name: 'Bob Pilterfrost'\n    }];\n    const thisPage = this;\n    let counter = 3;\n    const add = this.state.people;\n    add.push(newNames[counter].Name);\n    let interval = setInterval(function () {\n      fetch(`${config.API_ENDPOINT}/people`, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(newNames[counter--])\n      }).then(() => {\n        thisPage.updatePeopleList();\n      });\n\n      if (counter === -1) {\n        clearInterval(interval);\n      }\n    }, 5000);\n  }\n\n  adopt(e) {\n    e.preventDefault();\n    let type = {\n      type: e.target.id\n    };\n    this.fetchData(type);\n    alert('Congratulations! You have successfully adopted your new pet!!');\n  }\n\n  render() {\n    const {\n      dog,\n      cat,\n      people,\n      otherCats,\n      otherDogs,\n      currentUser\n    } = this.state;\n\n    if (people[0] === currentUser && people.length === 1) {\n      this.nextInLine();\n    }\n\n    return React.createElement(\"main\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Adopt a Pet\"), React.createElement(\"div\", {\n      className: \"pets-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dogBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Next Dog Up!\"), React.createElement(\"img\", {\n      src: dog.imageURL,\n      alt: dog.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"imageDesc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"\\\"\", dog.description, \"\\\"\")), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Name: \", dog.name), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Gender: \", dog.gender), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Age: \", dog.age, \" years old\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Breed: \", dog.breed), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Story: \", dog.story)), this.state.currentUser && this.state.currentUser === people[0] && React.createElement(\"form\", {\n      id: \"dog\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"dog\",\n      onClick: e => this.adopt(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Adopt Me!\"))), React.createElement(\"div\", {\n      className: \"catBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Next Cat Up!\"), React.createElement(\"img\", {\n      src: cat.imageURL,\n      alt: cat.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"imageDesc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"\\\"\", cat.description, \"\\\"\")), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Name: \", cat.name), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Gender: \", cat.gender), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Age: \", cat.age, \" years old\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Breed: \", cat.breed), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Story: \", cat.story)), this.state.currentUser && this.state.currentUser === people[0] && React.createElement(\"form\", {\n      id: \"cat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"cat\",\n      onClick: e => this.adopt(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Adopt Me!\"))), React.createElement(\"div\", {\n      className: \"other-pets-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"other-pets\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, otherCats.map((cat, i) => React.createElement(\"li\", {\n      key: i,\n      className: \"other-pet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: cat.imageURL,\n      alt: \"a cute doggie\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), cat.name, \" / \", cat.gender, \" / \", cat.breed, \" / \", cat.age)), otherDogs.map((dog, i) => React.createElement(\"li\", {\n      key: i,\n      className: \"other-pet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: dog.imageURL,\n      alt: \"a cute kitty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), dog.name, \" / \", dog.gender, \" / \", dog.breed, \" / \", dog.age))))), React.createElement(\"section\", {\n      className: \"adoption\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"In love yet? Join the queue below...\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Adoption Queue\"), React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, people.map((person, i) => React.createElement(\"li\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, person))), React.createElement(\"form\", {\n      onSubmit: e => this.onJoinQueue(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Join Queue\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/trina/thinkful/petful-client/src/Components/AdoptionPage/AdoptionPage.js"],"names":["React","Component","config","AdoptionPage","state","dog","cat","otherCats","otherDogs","people","currentUser","petChoice","updatePeopleList","fetch","API_ENDPOINT","then","res","json","data","console","log","setState","componentDidMount","nextDog","nextCat","allCats","slice","allDogs","onJoinQueue","e","preventDefault","name","Name","target","value","add","push","method","headers","body","JSON","stringify","thisPage","interval","setInterval","type","fetchData","clearInterval","nextInLine","newNames","counter","adopt","id","alert","render","length","imageURL","description","gender","age","breed","story","map","i","person"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './AdoptionPage.css';\nimport config from '../../config';\n\nexport default class AdoptionPage extends Component {\n  state = {\n    dog: {},\n    cat: {},\n    otherCats: [],\n    otherDogs: [],\n    people: [],\n    currentUser: null,\n    petChoice: true\n  };\n\n  componentDidMount() {\n    fetch(`${config.API_ENDPOINT}/pets`).then((res) => res.json()).then((data) => {\n      console.log('data:', data)\n      this.setState({\n        dog: data.nextDog,\n        cat: data.nextCat,\n        otherCats: data.allCats.slice(2,4),\n        otherDogs: data.allDogs.slice(2,4)\n      });\n    });\n    fetch(`${config.API_ENDPOINT}/people`).then((res) => res.json()).then((data) => {\n      console.log(data);\n      this.setState({\n        people: data\n      });\n    });\n  }\n\n  onJoinQueue(e) {\n    e.preventDefault();\n    const name = { Name: e.target.name.value };\n    const add = this.state.people;\n    add.push(e.target.name.value);\n\n    fetch(`${config.API_ENDPOINT}/people`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(name)\n    });\n\n    this.setState({\n      people: add,\n      currentUser: e.target.name.value\n    });\n    let thisPage = this;\n\n    let interval = setInterval(function() {\n      let petChoice;\n\n      if (thisPage.state.petChoice === true) {\n        petChoice = { type: 'cat' };\n      } else {\n        petChoice = { type: 'dog' };\n      }\n\n      thisPage.fetchData(petChoice);\n\n      thisPage.setState({\n        petChoice: !thisPage.state.petChoice\n      });\n      if (thisPage.state.people[1] === thisPage.state.currentUser) {\n        clearInterval(interval);\n      }\n    }, 5000);\n\n    e.target.name.value = '';\n  }\n\n  fetchData(petChoice) {\n    fetch(`${config.API_ENDPOINT}/pets`, {\n      method: 'DELETE',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(petChoice)\n    })\n      .then(() => {\n        return fetch(`${config.API_ENDPOINT}/pets`);\n      })\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState({\n          dog: data.nextDog,\n          cat: data.nextCat\n        });\n        return fetch(`${config.API_ENDPOINT}/people`);\n      })\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState({\n          people: data\n        });\n      });\n  }\n\n  nextInLine() {\n    const newNames = [\n      { Name: 'Sasha Morales' },\n      { Name: 'Trinity Hart' },\n      { Name: 'Ariel Forrest' },\n      { Name: 'Bob Pilterfrost' }\n    ];\n    const thisPage = this;\n    let counter = 3;\n    const add = this.state.people;\n    add.push(newNames[counter].Name);\n\n    let interval = setInterval(function() {\n      fetch(`${config.API_ENDPOINT}/people`, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(newNames[counter--])\n      }).then(() => {\n        thisPage.updatePeopleList();\n      });\n      if (counter === -1) {\n        clearInterval(interval);\n      }\n    }, 5000);\n  }\n\n  updatePeopleList = () => {\n    fetch(`${config.API_ENDPOINT}/people`).then((res) => res.json()).then((data) => {\n      console.log(data);\n      this.setState({\n        people: data\n      });\n    });\n  };\n\n  adopt(e) {\n    e.preventDefault();\n    let type = { type: e.target.id };\n    this.fetchData(type);\n    alert('Congratulations! You have successfully adopted your new pet!!');\n  }\n\n  render() {\n    const { dog, cat, people, otherCats, otherDogs, currentUser } = this.state\n\n    if (people[0] === currentUser && people.length === 1) {\n      this.nextInLine();\n    }\n    return (\n      <main className='main'>\n        <h1>Adopt a Pet</h1>\n        <div className='pets-container'>\n          <div className='dogBox'>\n            <h2>Next Dog Up!</h2>\n            <img src={dog.imageURL} alt={dog.description} />\n            <li className='imageDesc'>\n              <em>\"{dog.description}\"</em>\n            </li>\n            <ul>\n              <li>Name: {dog.name}</li>\n              <li>Gender: {dog.gender}</li>\n              <li>Age: {dog.age} years old</li>\n              <li>Breed: {dog.breed}</li>\n              <li>Story: {dog.story}</li>\n            </ul>\n            {this.state.currentUser &&\n            this.state.currentUser === people[0] && (\n              <form id='dog'>\n                <button id='dog' onClick={(e) => this.adopt(e)}>\n                  Adopt Me!\n                </button>\n              </form>\n            )}\n          </div>\n          <div className='catBox'>\n            <h2>Next Cat Up!</h2>\n            <img src={cat.imageURL} alt={cat.description} />\n            <li className='imageDesc'>\n              <em>\"{cat.description}\"</em>\n            </li>\n            <ul>\n              <li>Name: {cat.name}</li>\n              <li>Gender: {cat.gender}</li>\n              <li>Age: {cat.age} years old</li>\n              <li>Breed: {cat.breed}</li>\n              <li>Story: {cat.story}</li>\n            </ul>\n\n            {this.state.currentUser &&\n            this.state.currentUser === people[0] && (\n              <form id='cat'>\n                <button id='cat' onClick={(e) => this.adopt(e)}>\n                  Adopt Me!\n                </button>\n              </form>\n            )}\n          </div>\n\n          <div className='other-pets-container'>\n              <ul className='other-pets'>\n                {otherCats.map((cat, i) => \n                  <li key={i} className='other-pet'>\n                    <img src={cat.imageURL} alt='a cute doggie' />\n                    {cat.name} / {cat.gender} / {cat.breed} / {cat.age}\n                  </li>)}\n                {otherDogs.map((dog, i) => \n                  <li key={i} className='other-pet'>\n                    <img src={dog.imageURL} alt='a cute kitty' />\n                    {dog.name} / {dog.gender} / {dog.breed} / {dog.age}\n                  </li>)}\n              </ul>\n            </div>\n\n        </div>\n        <section className='adoption'>\n          <h3>In love yet? Join the queue below...</h3>\n          <label>Adoption Queue</label>\n          <ol>{people.map((person, i) => <li key={i}>{person}</li>)}</ol>\n          <form onSubmit={(e) => this.onJoinQueue(e)}>\n            <label>Name:</label>\n            <input type='text' name='name' />\n            <button>Join Queue</button>\n          </form>\n        </section>\n      </main>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}